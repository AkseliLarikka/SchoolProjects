# Documentation for E11

## Muunnetaan lubuntu oikeaan verkkoon

Eli bridged adapter... Siirretään Lubuntu 1 käyttämään sitä

### Testaillaan iperf yhteyksiä

![iperf](./E10/iperf%20yhteys.png)

toimii!

![iperf portti 5201](./E10/image.png)

En saanut toimimaan käsketyllä portilla enkä muullakaan portilla. Google ehdotti, että ![Porttia ei ole](https://serverfault.com/questions/280961/iperf-connect-failed-connection-refused).

![iperf interval](./E10/iperfinter.png)

iperf toimii myös intervallitetulla ajastuksella

![iperf port u](./E10/iperfportu.png)

Iperf toimii portilla ja UDP:lla

![iperf port](./E10/iperf%20port.png)

Iperf toimii pelkällä portilla

![iperf udp](./E10/iperfu.png)

Iperf toimii pelkällä UDP:lla

### Pohdinnat

Portilla 5201 ei toimi, mutta UDP:n kautta toimii oletetuilla nopeuksilla.

## Lubuntusta iperf palvelin

Aletaan siirtämällä testaukseen käytetty lubuntu takaisin sisäverkkoon

![lubuntut kuulee](./E10/lubntuyhteys.png)

Lubuntut saa toisiinsa yhteyden. Valitaan Lubuntu 2 olemaan iperf-palvelin

![iperf sisäservu toimii](./E10/iperfsisäservutoimii.png)

Lubuntu 2:sta tuli onnistuneesti iperf palvelin ja lubuntu 1 pystyi ottamaan siihen yhteyden ja lubuntu 2 vastasi asianmukaisesti.

![iperf interval ja udp](./E10/aikajaudpsisa.png)

intervalli yhteys ja udp yhteys onnistuvat sisä iperf:llä

![iperf portiton](./E10/iperfeiport.png)

Iperf yhteys onnistuu ilman erikseen portin nimeämistä

### Serverin näkökulmasta samat

![servu viewpoint](./E10/servuvp.png)

Tässä iperf palvelimen näkökulman viestejä

## Wireshark TCP

Sitten etsitään Wiresharkilla 3-way-handshake TCP-yhyeydestä. Tässä ensin kokonaisuudessaan segmentit.

![wireshark ack](./E11/wiresharkack.png)

Sitten 1. segmentti:

![eka segmentti](./E11/ekasegmentti.png)

source port on lubuntu 2 eli iperf palvelimen portti 5001 ja vastaanottava portti on lubuntu 1 portti 53016. Sequence numer on 1 koska tämä on yhteyden ensimmäinen yhteys

![toka segmentti](./E11/tokasegmentti.png)

Nyt source ja destination portit ovat käänteiset kun äsken lähetettyyn "kyselyyn" vastataan. Acknowledgement numero nousee

![koka segmentti](./E11/kokasegmentti.png)

Nyt portit ovat taas alkuperäisessä asennossa ja acknowledgement numero on taas noussut

## Wireshark UDP

